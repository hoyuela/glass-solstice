<?xml version="1.0" encoding="UTF-8"?>
<project name="Discover-Android">
	
	<!-- Android build file import -->
	<import file="build.xml" />
	
	<target name="sonar-export-classpath" depends="-build-setup">
		<pathconvert property="libs" pathsep="," refid="project.all.jars.path" />
		<echo message="android classpath: ${libs}" />
		<pathconvert property="classpath" pathsep="," refid="project.target.class.path" />
		<echo message="android classpath: ${classpath}" />
	</target>
	
	<loadproperties srcFile="/conf/sonar.properties" />
	<property name="sonar.host.url" value="" />
	
	<target name="sonar" depends="sonar-export-classpath">
		<echoxml file="/build.xml" namespacePolicy="elementsOnly">
			<project default="run-sonar">
				<target name="run-sonar">
					<property name="sonar.projectName" value="Discover: Android" />
					<property name="sonar.sources" value="src,res" />
					<property name="sonar.binaries" value="bin/classes" />
					<property name="sonar.artifact.path" value="Phone/main/bin/Discover-Android-debug.apk" />
					
					<property name="sonar.modules" value="commons,phone"/>
					
					<property name="commons.sonar.projectName" value="Discover: Android - Commons" />
					<property name="commons.sonar.projectBaseDir" value="Commons/main" />
					<!-- <property name="commons.sonar.sources" value="Commons/main/src,Commons/main/res" />
					<property name="commons.sonar.binaries" value="Commons/main/bin/classes" /> -->
					
					<property name="phone.sonar.projectName" value="Discover: Android - Phone" />
					<property name="phone.sonar.projectBaseDir" value="Phone/main" />
					<!-- <property name="phone.sonar.sources" value="Phone/main/src,Phone/main/res" />
					<property name="phone.sonar.binaries" value="Phone/main/bin/classes" /> -->
					
					<property name="sonar.libraries" value="${classpath},${libs}" />
					
					<property name="sonar.java.source" value="1.6" />
					<property name="sonar.java.target" value="1.6" />
					
					<property name="sonar.projectKey" value="com.discover.mobile:Discover-Android" />
					<property name="sonar.projectVersion" value="1.0-SNAPSHOT" />
					
					<sonar xmlns="antlib:org.sonar.ant" />
				</target>
			</project>
		</echoxml>
		
		<ant dir="" target="run-sonar" inheritAll="true" />
	</target>

</project>
